<%- include('./partials/header') %>

<% if(error.length > 0) { %>
    <div class="fixed top-5 left-1/2 transform -translate-x-1/2 p-4 rounded-lg bg-red-500 text-white shadow-lg z-50 animate-bounce">
        <span class="flex items-center"><i class="ri-error-warning-line mr-2"></i><%= error %></span>
    </div>
<% } %>

<main class="flex-1 flex items-center justify-center bg-gradient-to-br from-blue-600 via-indigo-500 to-purple-600 py-10 sm:py-16 relative overflow-hidden">
    <!-- Animated background elements -->
    <div class="absolute inset-0 overflow-hidden">
        <div class="absolute -inset-[10%] blur-3xl opacity-20">
            <div class="absolute top-1/4 left-1/4 w-64 h-64 rounded-full bg-pink-400 animate-pulse"></div>
            <div class="absolute top-3/4 left-1/2 w-80 h-80 rounded-full bg-yellow-300 animate-pulse"></div>
            <div class="absolute top-1/3 right-1/4 w-72 h-72 rounded-full bg-cyan-400 animate-pulse"></div>
        </div>
    </div>

    <div class="container mx-auto px-4 sm:px-6 lg:px-8 max-w-6xl z-10">
        <div class="bg-white bg-opacity-95 backdrop-blur-md rounded-2xl shadow-2xl overflow-hidden flex flex-col lg:flex-row">
            <!-- Left side - Brand Image/Info -->
            <div class="hidden lg:block lg:w-5/12 bg-gradient-to-r from-indigo-600 to-blue-500 text-white p-12 relative">
                <div class="absolute inset-0 bg-cover bg-center opacity-10" style="background-image: url('https://images.unsplash.com/photo-1607082351504-4e8ffb09fc8c?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1050&q=80');"></div>
                <div class="relative h-full flex flex-col justify-between">
                    <div class="mb-8">
                        <h1 class="text-4xl font-bold tracking-tight mb-6">Welcome to ShopVerse</h1>
                        <p class="text-white/80 text-lg">Your one-stop destination for all your shopping needs with amazing deals and exclusives.</p>
                    </div>
                    <div class="space-y-8">
                        <div class="flex items-center">
                            <div class="bg-white/20 p-2 rounded-full">
                                <i class="ri-shield-check-line text-xl"></i>
                            </div>
                            <p class="ml-4 text-white/90">Secure & easy checkout process</p>
                        </div>
                        <div class="flex items-center">
                            <div class="bg-white/20 p-2 rounded-full">
                                <i class="ri-truck-line text-xl"></i>
                            </div>
                            <p class="ml-4 text-white/90">Fast delivery across the country</p>
                        </div>
                        <div class="flex items-center">
                            <div class="bg-white/20 p-2 rounded-full">
                                <i class="ri-refund-2-line text-xl"></i>
                            </div>
                            <p class="ml-4 text-white/90">100% money back guarantee</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Right side - Auth Forms -->
            <div class="w-full lg:w-7/12">
                <!-- Tabs for switching between Login and Register -->
                <div class="flex border-b border-gray-200">
                    <button id="login-tab" class="w-1/2 py-4 text-center font-medium text-gray-700 hover:text-blue-600 border-b-2 border-blue-600 tab-active">Login</button>
                    <button id="register-tab" class="w-1/2 py-4 text-center font-medium text-gray-500 hover:text-blue-600 border-b-2 border-transparent">Register</button>
                </div>

                <div class="p-8">
                    <!-- Login Form -->
                    <div id="login-form" class="auth-form active">
                        <h2 class="text-2xl font-bold text-gray-800 mb-6">Sign In to Your Account</h2>
                        <form autocomplete="off" action="/users/login" method="post" class="space-y-5">
                            <div class="space-y-2">
                                <label for="login-email" class="text-sm font-medium text-gray-700">Email Address</label>
                                <div class="relative">
                                    <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                        <i class="ri-mail-line text-gray-500"></i>
                                    </div>
                                    <input
                                        id="login-email"
                                        class="w-full pl-10 pr-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-gray-50 text-base transition-all duration-200"
                                        type="email" placeholder="your@email.com" name="email" required>
                                </div>
                            </div>
                            <div class="space-y-2">
                                <label for="login-password" class="text-sm font-medium text-gray-700">Password</label>
                                <div class="relative">
                                    <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                        <i class="ri-lock-line text-gray-500"></i>
                                    </div>
                                    <input
                                        id="login-password"
                                        class="w-full pl-10 pr-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-gray-50 text-base transition-all duration-200"
                                        type="password" placeholder="********" name="password" required>
                                </div>
                            </div>
                            <div class="flex items-center justify-between">
                                <div class="flex items-center">
                                    <input id="remember-me" name="remember-me" type="checkbox" class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded">
                                    <label for="remember-me" class="ml-2 block text-sm text-gray-700">Remember me</label>
                                </div>
                                <a href="#" class="text-sm font-medium text-blue-600 hover:text-blue-800">Forgot password?</a>
                            </div>
                            <button
                                class="w-full py-3 bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white rounded-lg shadow-md hover:shadow-lg transition duration-300 font-semibold text-base flex items-center justify-center"
                                type="submit">
                                <i class="ri-login-box-line mr-2"></i> Sign In
                            </button>
                            <div class="relative flex items-center justify-center mt-4">
                                <div class="h-px bg-gray-300 absolute left-0 right-0"></div>
                                <span class="px-3 bg-white text-sm text-gray-500 relative">Or continue with</span>
                            </div>                            <div class="flex justify-center w-full">
                                <a href="/users/auth/google" class="py-2.5 px-4 border border-gray-300 rounded-lg shadow-sm bg-white text-gray-700 hover:bg-gray-50 focus:outline-none flex items-center justify-center transition-all w-full">
                                    <i class="ri-google-fill text-lg mr-2 text-red-500"></i>
                                    <span>Google</span>
                                </a>
                            </div>
                        </form>
                    </div>

                    <!-- Register Form -->
                    <div id="register-form" class="auth-form hidden">
                        <h2 class="text-2xl font-bold text-gray-800 mb-6">Create Your Account</h2>
                        <form autocomplete="off" action="/users/register" method="post" class="space-y-5">
                            <div class="space-y-2">
                                <label for="register-name" class="text-sm font-medium text-gray-700">Full Name</label>
                                <div class="relative">
                                    <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                        <i class="ri-user-line text-gray-500"></i>
                                    </div>
                                    <input
                                        id="register-name"
                                        class="w-full pl-10 pr-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-gray-50 text-base transition-all duration-200"
                                        type="text" placeholder="John Doe" name="fullname" required>
                                </div>
                            </div>
                            <div class="space-y-2">
                                <label for="register-email" class="text-sm font-medium text-gray-700">Email Address</label>
                                <div class="relative">
                                    <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                        <i class="ri-mail-line text-gray-500"></i>
                                    </div>
                                    <input
                                        id="register-email"
                                        class="w-full pl-10 pr-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-gray-50 text-base transition-all duration-200"
                                        type="email" placeholder="your@email.com" name="email" required>
                                </div>
                            </div>
                            <div class="space-y-2">
                                <label for="register-password" class="text-sm font-medium text-gray-700">Password</label>
                                <div class="relative">
                                    <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                        <i class="ri-lock-line text-gray-500"></i>
                                    </div>
                                    <input
                                        id="register-password"
                                        class="w-full pl-10 pr-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-gray-50 text-base transition-all duration-200"
                                        type="password" placeholder="Create a strong password" name="password" required>
                                </div>
                                <p class="text-xs text-gray-500 mt-1">Must be at least 8 characters with letters and numbers</p>
                            </div>
                            <div class="flex items-center">
                                <input id="terms" name="terms" type="checkbox" class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded" required>
                                <label for="terms" class="ml-2 block text-sm text-gray-700">I agree to the <a href="#" class="text-blue-600 hover:text-blue-800">Terms of Service</a> and <a href="#" class="text-blue-600 hover:text-blue-800">Privacy Policy</a></label>
                            </div>                            <button
                                class="w-full py-3 bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white rounded-lg shadow-md hover:shadow-lg transition duration-300 font-semibold text-base flex items-center justify-center"
                                type="submit">
                                <i class="ri-user-add-line mr-2"></i> Create Account
                            </button>
                            
                            <div class="relative flex items-center justify-center mt-4">
                                <div class="h-px bg-gray-300 absolute left-0 right-0"></div>
                                <span class="px-3 bg-white text-sm text-gray-500 relative">Or register with</span>
                            </div>                            <div class="flex justify-center w-full mt-4">
                                <a href="/users/auth/google" class="py-2.5 px-4 border border-gray-300 rounded-lg shadow-sm bg-white text-gray-700 hover:bg-gray-50 focus:outline-none flex items-center justify-center transition-all w-full">
                                    <i class="ri-google-fill text-lg mr-2 text-red-500"></i>
                                    <span>Google</span>
                                </a>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</main>

<script>    document.addEventListener('DOMContentLoaded', function() {
        const loginTab = document.getElementById('login-tab');
        const registerTab = document.getElementById('register-tab');
        const loginForm = document.getElementById('login-form');
        const registerForm = document.getElementById('register-form');
        
        // Add loading state to social login buttons
        const socialButtons = document.querySelectorAll('[href^="/users/auth/"]');
        socialButtons.forEach(button => {
            button.addEventListener('click', function(e) {
                // Visual feedback when clicking social login buttons
                this.classList.add('opacity-75');
                const icon = this.querySelector('i');
                const text = this.querySelector('span');
                
                // Store original text
                const originalText = text.textContent;
                const originalIcon = icon.className;
                
                // Change to loading state
                icon.className = 'ri-loader-4-line animate-spin mr-2';
                text.textContent = 'Connecting...';
                
                // Reset if taking too long (fallback)
                setTimeout(() => {
                    if (document.body.contains(this)) {
                        this.classList.remove('opacity-75');
                        icon.className = originalIcon;
                        text.textContent = originalText;
                    }
                }, 8000);
            });
        });
        
        loginTab.addEventListener('click', function() {
            // Activate login tab
            loginTab.classList.add('tab-active', 'border-blue-600', 'text-gray-700');
            loginTab.classList.remove('text-gray-500', 'border-transparent');
            // Deactivate register tab
            registerTab.classList.remove('tab-active', 'border-blue-600', 'text-gray-700');
            registerTab.classList.add('text-gray-500', 'border-transparent');
            // Show login form, hide register form
            loginForm.classList.remove('hidden');
            loginForm.classList.add('active');
            registerForm.classList.add('hidden');
            registerForm.classList.remove('active');
        });
        
        registerTab.addEventListener('click', function() {
            // Activate register tab
            registerTab.classList.add('tab-active', 'border-blue-600', 'text-gray-700');
            registerTab.classList.remove('text-gray-500', 'border-transparent');
            // Deactivate login tab
            loginTab.classList.remove('tab-active', 'border-blue-600', 'text-gray-700');
            loginTab.classList.add('text-gray-500', 'border-transparent');
            // Show register form, hide login form
            registerForm.classList.remove('hidden');
            registerForm.classList.add('active');
            loginForm.classList.add('hidden');
            loginForm.classList.remove('active');
        });
    });
</script>

<%- include('./partials/footer') %>
